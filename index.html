<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>
			BEACON - Behavioral Educational Analysis and Classroom Observation
			Notebook
		</title>
		<link rel="stylesheet" href="style.css" />
	</head>
	<body>
		<!-- Authentication UI -->
		<div id="authContainer" class="auth-container">
			<div class="auth-header">
				<h1>BEACON</h1>
				<p>Behavioral Educational Analysis & Classroom Observation Notebook</p>
			</div>
			<h2>Login to BEACON</h2>
			<input type="email" id="emailInput" placeholder="Email" />
			<input type="password" id="passwordInput" placeholder="Password" />

			<div class="auth-buttons">
				<button onclick="logIn()">Log In</button>
				<button onclick="signUp()">Sign Up</button>
			</div>

			<p id="authMessage" style="font-size: 0.9rem; margin-top: 10px"></p>
		</div>

		<div class="container">
			<div class="header">
				<h1>BEACON</h1>
				<p>
					<strong
						>Behavioral Educational Analysis &amp; Classroom Observation
						Notebook</strong
					>
				</p>
				<p>
					Advanced behavioral analysis with event counting and duration tracking
					<span style="font-size: 0.7rem; opacity: 0.7">v1</span>
				</p>
				<p style="font-size: 0.7rem; opacity: 0.7; margin-top: 10px">
					&copy; 2025 Georgios Hoplaros, PhD
				</p>
			</div>

			<div class="content">
				<div class="section">
					<div class="section-title">Media File</div>
					<div class="file-input-container">
						<input
							type="file"
							id="fileInput"
							class="file-input"
							accept="video/*,audio/*"
						/>
						<label for="fileInput" class="file-input-label">
							ğŸ“ Choose Video or Audio File
						</label>
						<p
							style="
								margin: 12px 0 0 0;
								color: var(--text-secondary);
								font-size: 0.9rem;
							"
						>
							Supports MP4, MP3, WAV, and other common formats
						</p>
						<button
							onclick="uploadVideo()"
							class="btn btn-primary"
							style="margin-top: 12px"
						>
							ğŸ’¾ Upload to Cloud
						</button>
					</div>

					<div id="mediaContainer" style="display: none">
						<div id="videoFrame" class="video-frame attached">
							<div class="frame-header">
								<span class="drag-handle">â‹®â‹®</span>
								<span class="frame-title">Video Player</span>
								<button id="detachVideoBtn" class="detach-btn video">
									ğŸ¬ Detach Video
								</button>
							</div>
							<div class="video-container">
								<video id="player" controls></video>
							</div>
							<div class="video-controls">
								<div class="video-size-controls">
									<span class="video-size-label">Video Size:</span>
									<input
										type="range"
										id="sizeSlider"
										class="size-slider"
										min="300"
										max="1200"
										value="800"
										step="50"
									/>
									<span id="sizeDisplay" class="video-size-label">800px</span>
								</div>
								<div id="statusIndicator" class="status-indicator ready">
									<span>â—</span> Ready to track
								</div>
							</div>
						</div>
					</div>
				</div>

				<div class="section">
					<div class="section-title">Controls</div>
					<div class="controls-grid">
						<button id="createEC" class="btn btn-primary">
							â• Create Event Count
						</button>
						<button id="createDE" class="btn btn-secondary">
							â±ï¸ Create Duration Event
						</button>
						<button id="showGraph" class="btn btn-success">
							ğŸ“Š Show Observation Graph
						</button>
						<button id="exportSVG" class="btn btn-warning">
							â¬‡ï¸ Export Graph as SVG
						</button>
						<button id="saveData" class="btn btn-secondary">
							ğŸ’¾ Save Data
						</button>
						<button id="loadData" class="btn btn-secondary">
							ğŸ“‚ Load Data
						</button>
						<button id="analysisBtn" class="btn btn-primary">
							ğŸ“ˆ Data Analysis
						</button>
					</div>
				</div>

				<div class="section">
					<div class="section-title">Event Configurations</div>
					<div id="controlsFrame" class="controls-frame attached">
						<div class="frame-header">
							<span class="drag-handle">â‹®â‹®</span>
							<span class="frame-title">Event Controls</span>
							<button id="detachBtn" class="detach-btn">
								ğŸ“Œ Detach Controls
							</button>
						</div>
						<div class="events-container">
							<div id="eventsContainer">
								<div class="empty-state">
									<div class="empty-state-icon">ğŸ¯</div>
									<p><strong>No events configured yet</strong></p>
									<p>
										Click "Create Event Count" or "Create Duration Event" to
										start tracking behaviors
									</p>
								</div>
							</div>
						</div>
					</div>
				</div>

				<div
					id="analysisContainer"
					class="analysis-container"
					style="display: none"
				></div>
				<canvas
					id="observationChart"
					width="1000"
					height="500"
					style="display: none"
				></canvas>
			</div>
		</div>

		<!-- Copyright footer at the absolute bottom of the page -->
		<div class="copyright-footer">&copy; 2025 Georgios Hoplaros, PhD</div>

		<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.5/dist/umd/supabase.min.js"></script>
		<script src="supabase.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1"></script>
		<script src="app.js"></script>
	</body>
</html>
